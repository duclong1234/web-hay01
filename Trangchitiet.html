<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="fileCSS.css">
    <!--link th∆∞ vi·ªán c·ªßa font awsome cho ph√©p s·ª≠ d·ª•ng ICON-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <title>Movies-design</title>
    </head>

    
    <body>
        <div class="navbar">
            <div class="navbar-container">
                <div class="logo-container"><h1 class="logo">Movies</h1></div>
                <div class="menu-container">
                    <ul class="menu-list">
                        <li class="menu-list-item" id="BOLD"><a href="TRANGWEB.html">Trang ch·ªß</a></li>
                        <li class="menu-list-item">Xem phim</li>
                        <li class="menu-list-item"><a href="Tranglienhe.html">Li√™n h·ªá</a></li>
                        <li class="menu-list-item"><a href="Trangtimkiem.html?keyword=f">T√¨m ki·∫øm</a></li>
                    </ul>
                </div>
                <div class="profile-container">
                    <!--thanh t√¨m ki·∫øm-->
                    <form action="Trangtimkiem.html" method="GET" id="search-box">
                            <input type="text" id="search-text" name="keyword" placeholder="T√¨m ki·∫øm..." required autocomplete="off"> <!--t·∫Øt thanh g·ª£i √Ω m·∫∑c ƒë·ªãnh-->
                            <button type="submit" id="search-btn">
                                <i class="fas fa-search"></i>
                            </button>
                            <ul id="suggestions"></ul>
                        </form>
                    <!--th·∫ª ch·ª©a h√¨nh ·∫£nh sau khi nh·∫≠p t√¨m ki·∫øm-->

                    <div class="toggle">
                        <i class="fas fa-moon toggle-icon"></i>
                        <i class="fas fa-sun toggle-icon"></i>
                        <div class="toggle-ball"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <!--ph·∫ßn tr√¨nh chi·∫øu video xem phim khi ta click ch√∫ng ·ªü trang ch·ªß-->
        <div class="container">
            <div class="content-container">
                
                <div class="featured-content" id="featured-content">
                    
                        <video id="movie-video" controls muted poster="">
                            <source id="video-source" src="" type="video/mp4">
                        </video>

                        <!-- C√°c n√∫t ƒëi·ªÅu khi·ªÉn -->
                        <div class="video-controls">
                            <!-- N√∫t Tua -->
                            <button id="rewind-btn" class="control-btn">
                                <i class="fa-solid fa-backward-fast"></i>
                            </button>

                            <button id="forward-btn" class="control-btn">
                                <i class="fa-solid fa-forward-fast"></i>
                            </button>
                        </div>

                        <!-- <div class="title-description">
                            <h1 id="movie-title"></h1>
                            <p id="movie-description"></p>
                        </div> -->

                </div>
                 <script src="app.js"></script>

                <script>
                    let currentIndex3 = 0;
                </script>
                
                <div class="movie-list-container">
                    <h1 class="movie-list-title">ƒê·ªÄ XU·∫§T</h1>
                    <div class="movie-list-wrapper">
                        <div class="movie-list"   id="list-trang-chi-tiet">
        
                            <!--ph·∫ßn tr·∫£ v·ªÅ k·∫øt qu·∫£ ƒë·ªÅ xu·∫•t-->

                        </div>
                        <i class="arrowleft fas fa-chevron-left" onclick="currentIndex3 = scrollArrow('left', currentIndex3, 'list-trang-chi-tiet')"></i>
                        <i class="arrow fas fa-chevron-right" onclick="currentIndex3 = scrollArrow('right', currentIndex3, 'list-trang-chi-tiet')"></i><!--class arrow l√† ƒë·ªãa ch·ªâ cho css c√≤n fas fa-chevron-right l√† icon-->
                    </div>
                </div>

            </div>
        </div>
        <footer style="background-color: rgba(0,0,0,0); border-top: 2px solid red; color: #777; padding: 20px 0; text-align: center;">
            <div style="max-width: 1000px; margin: auto;">
              <p style="font-size: 18px; margin-bottom: 10px;">üé¨ Website Xem Phim Tr·ª±c Tuy·∫øn</p>
              <p style="font-size: 14px; margin: 5px 0;">Li√™n h·ªá: contact@xemphimonline.vn</p>
              <p style="font-size: 14px; margin: 5px 0;">¬© 2025 XemPhimOnline.vn ‚Äì All rights reserved</p>
              <p style="font-size: 13px; margin-top: 10px;">
                N·ªôi dung tr√™n website ƒë∆∞·ª£c t·ªïng h·ª£p t·ª´ nhi·ªÅungu·ªìn kh√°c nhau v√† ch·ªâ ph·ª•c v·ª• m·ª•c ƒë√≠ch gi·∫£i tr√≠.
              </p>
            </div>
          </footer>
        
    </body>
    
</html>
<!-- ƒë·∫∑t ·ªü ƒë√¢y l√† ƒë·ªÉ ƒë·∫£m b·∫£o trang web ƒë√£ ƒë∆∞·ª£c t·∫£i xong th√¨ m·ªõi ch·∫°y h√†m -->
<script>
                        darkLight();
                        
                        const params = new URLSearchParams(window.location.search);
                        const movieId = parseInt(params.get('id'));

                        const container = document.querySelector(".movie-list");

                        // H√†m t·∫°o ph·∫ßn t·ª≠ phim ƒë·ªÅ xu·∫•t
                        function displayfilm(film) {
                            const movieItem = document.createElement("div");
                            movieItem.className = "movie-list-item";
                            // <p class="movie-list-item-desc">${film.description}</p>
                            movieItem.innerHTML = `
                                <img class="movie-list-item-img" src="${film.poster}">
                                <span class="movie-list-item-title">${film.title}</span>
                                <button class="movie-list-item-button" onclick="playVideo(${film.id})">
                                    <i class="fa-solid fa-play"> Xem ngay</i>
                                </button>
                            `;

                            container.appendChild(movieItem);//th√™m ph·∫ßn t·ª≠ v√†o m·ªôt th·∫ª ch·ª©a 
                        }

                        // H√†m xo√° kho·∫£ng tr·∫Øng v√† vi·∫øt th∆∞·ªùng
                        function tolower(str) {
                            return str.toLowerCase().replace(/\s+/g, '');
                        }

                        function playVideo(movieId) {
                            const videoElement = document.getElementById('movie-video');
                            const source = document.getElementById('video-source');
                            const description = document.getElementById("movie-description");
                            const title = document.getElementById("movie-title");
                            // T√¨m phim ƒë√∫ng ID
                            const movie = movieList.find(m => m.id === movieId);
                            if (!movie) return;
                            // C·∫≠p nh·∫≠t video
                            source.src = movie.video;
                            videoElement.poster = movie.poster;
                            videoElement.style.display = "block";
                            videoElement.load();
                            videoElement.muted = true;
                             //  // C·∫≠p nh·∫≠t ti√™u ƒë·ªÅ v√† m√¥ t·∫£
                            // videoElement.textContent = movie.title;
                            // videoElement.textContent = movie.description;
                            // X√≥a danh s√°ch c≈©
                            container.innerHTML = "";
                            const displayedIds = [];

                        // G·ª£i √Ω phim d·ª±a theo thu·ªôc t√≠nh gi·ªëng
                            function dequyDeXuat(currentMovie) {
                            displayedIds.push(currentMovie.id);

                            movieList.forEach(movieItem => {
                                if (displayedIds.includes(movieItem.id)) return;

                                // 1. So s√°nh ti√™u ƒë·ªÅ, ƒë·∫°o di·ªÖn, NSX, nƒÉm
                                if (
                                    tolower(movieItem.title).includes(tolower(currentMovie.title)) ||
                                    tolower(movieItem.title_en).includes(tolower(currentMovie.title_en)) ||
                                    tolower(movieItem.director).includes(tolower(currentMovie.director)) ||
                                    tolower(movieItem.producer).includes(tolower(currentMovie.producer)) ||
                                    movieItem.year === currentMovie.year
                                ) {
                                    displayfilm(movieItem);
                                    displayedIds.push(movieItem.id);
                                    dequyDeXuat(movieItem);
                                    return; // Kh√¥ng c·∫ßn ki·ªÉm ti·∫øp, ƒë√£ hi·ªÉn th·ªã r·ªìi
                                }

                                // 2. So s√°nh d√†n di·ªÖn vi√™n
                                for (let k = 0; k < currentMovie.main_cast.length; k++) {
                                    if (movieItem.main_cast.includes(currentMovie.main_cast[k])) {
                                        displayfilm(movieItem);
                                        displayedIds.push(movieItem.id);
                                        dequyDeXuat(movieItem);
                                        return;
                                    }
                                }

                                // 3. So s√°nh th·ªÉ lo·∫°i
                                for (let k = 0; k < currentMovie.genres.length; k++) {
                                    if (movieItem.genres.includes(currentMovie.genres[k])) {
                                        displayfilm(movieItem);
                                        displayedIds.push(movieItem.id);
                                        dequyDeXuat(movieItem);
                                        return;
                                    }
                                }
                            });
                        }

                        dequyDeXuat(movie); //h√†m ƒë·ªá quy
                        }

                        playVideo(movieId);

                        const video = document.getElementById("movie-video"); // ID th·∫ª <video>
                        const rewindBtn = document.getElementById("rewind-btn");
                        const forwardBtn = document.getElementById("forward-btn");
                        const speedSelect = document.getElementById("speed-select");

                        // Tua l·∫°i 10 gi√¢y
                        rewindBtn.addEventListener("click", function () {
                            video.currentTime -= 10;
                        });

                        // Tua t·ªõi 10 gi√¢y
                        forwardBtn.addEventListener("click", function () {
                            video.currentTime += 10;
                        });
                </script>