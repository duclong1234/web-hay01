<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="fileCSS.css">
  <!--link th∆∞ vi·ªán c·ªßa font awsome cho ph√©p s·ª≠ d·ª•ng ICON-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <!-- link th∆∞ vi·ªán l·∫•y ch·ªØ Google Fonts  -->
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">
    <title>Movies-design</title>
    
</head>

    <body>
        <div class="navbar">
            <div class="navbar-container">
                <div class="logo-container"><h1 class="logo">Movies</h1></div>
                <div class="menu-container">
                    <ul class="menu-list">
                        <li class="menu-list-item" id="BOLD">Trang ch·ªß</li>
                        <li class="menu-list-item"><a href="Trangchitiet.html?id=2">Xem phim</a></li>
                        <li class="menu-list-item"><a href="Tranglienhe.html">Li√™n h·ªá</a></li>
                        <li class="menu-list-item"><a href="Trangtimkiem.html?keyword=f">T√¨m ki·∫øm</a></li>
                    </ul>
                </div>
                <div class="profile-container">
                    <!--thanh t√¨m ki·∫øm-->
                        <form action="Trangtimkiem.html" method="GET" id="search-box">
                            <input type="text" id="search-text" name="keyword" placeholder="Search ?" required autocomplete="off"> <!--t·∫Øt thanh g·ª£i √Ω m·∫∑c ƒë·ªãnh-->
                            <button type="submit" id="search-btn">
                                <i class="fas fa-search"></i>
                            </button>
                            <ul id="suggestions"></ul> <!-- Hi·ªÉn th·ªã g·ª£i √Ω -->
                        </form>
                     <!--th·∫ª ch·ª©a h√¨nh ·∫£nh sau khi nh·∫≠p t√¨m ki·∫øm-->
                    
                    <div class="toggle">
                        <i class="fas fa-moon toggle-icon"></i>
                        <i class="fas fa-sun toggle-icon"></i>
                        <div class="toggle-ball"></div>
                    </div>
                </div>
            </div>
        </div>
       
        <div class="container"> 
            <div class="content-container">
                <div class="featured-content"> 
                    <div class="scroll-wrapper">
                    <div id="scroll-container">
                    <!-- <div class="movie-list-main-item">
                        <video id="movie-video" controls poster="" autoplay muted>
                            <source id="video-source" src="" type="video/mp4">
                        </video>

                        <div class="overlay">
                        <h2 class="featured-title">ƒêI·ªÜP V·ª§ GI·∫¢I C·ª®U</h2>
                        
                        <button class="featured-button"><i class="fa-solid fa-play"> Xem ngay</i></button>
                        </div> -->
                    </div>
                </div>
                <!--v√¨ sao scrollLeft kh√¥ng ch·∫°y ƒë∆∞·ª£c v√¨ c√≥ th·ªÉ tr√¨nh duy·ªát 
                c≈©ng s·ª≠ d·ª•ng c√°i t√™n n√†y r·ªìi n√™n ph·∫£i ƒë·ªïi t√™n th√°nhcrollToLeft-->
                <button class="slide-button slide-left" onclick="scrollToRight('left')"><i class="fa-solid fa-chevron-left"></i></button>
                <button class="slide-button slide-right" onclick="scrollToRight('right')"><i class="fa-solid fa-chevron-right"></i></button>
                </div>
<!--ranh movie-list-container-->         
                <div class="movie-list-container">
                    <h1 class="movie-list-title">PHIM H√ÄNH ƒê·ªòNG</h1>
                    <div class="movie-list-wrapper">
                        <div class="movie-list" id="list1">

                            
                            
                        </div>
                        <i class="arrowleft fas fa-chevron-left" onclick="currentIndex1 = scrollArrow('left', currentIndex1, 'list1')"></i>
                        <i class="arrow fas fa-chevron-right" onclick="currentIndex1 = scrollArrow('right', currentIndex1, 'list1')"></i><!--class arrow l√† ƒë·ªãa ch·ªâ cho css c√≤n fas fa-chevron-right l√† icon-->
                    </div>
                </div>
<!--ranh movie-list-container-->        
                <div class="movie-list-container">
                    <h1 class="movie-list-title">PHIM TH·ªäNH H√ÄNH</h1>
                    <div class="movie-list-wrapper">
                        <div id="list2" class="movie-list">

                           
                        </div>
                        <!--hai thanh tr∆∞·ª£t ngang tr√°i v√† ph·∫£i-->
                        <i class="arrowleft fas fa-chevron-left" onclick="currentIndex2 = scrollArrow('left', currentIndex2, 'list2')"></i>
                        <i class="arrow fas fa-chevron-right" onclick="currentIndex2 = scrollArrow('right', currentIndex2, 'list2')"></i><!--class arrow l√† ƒë·ªãa ch·ªâ cho css c√≤n fas fa-chevron-right l√† icon-->
                    </div>
                </div>
<!--ranh movie-list-container-->
            </div> 
        </div>
        
        <footer style="background-color: rgba(0,0,0,0); border-top: 2px solid red; color: #777; padding: 20px 0; text-align: center;">
            <div style="max-width: 1000px; margin: auto;">
              <p style="font-size: 18px; margin-bottom: 10px;">üé¨ Website Xem Phim Tr·ª±c Tuy·∫øn</p>
              <p style="font-size: 14px; margin: 5px 0;">Li√™n h·ªá: contact@xemphimonline.vn</p>
              <p style="font-size: 14px; margin: 5px 0;">¬© 2025 XemPhimOnline.vn ‚Äì All rights reserved</p>
              <p style="font-size: 13px; margin-top: 10px;">
                N·ªôi dung tr√™n website ƒë∆∞·ª£c t·ªïng h·ª£p t·ª´ nhi·ªÅungu·ªìn kh√°c nhau v√† ch·ªâ ph·ª•c v·ª• m·ª•c ƒë√≠ch gi·∫£i tr√≠.
              </p>
            </div>
          </footer>
    </body>
</html>
                <script>
                    let currentIndex1 = 0;
                    let currentIndex2 = 0;
                </script>
                <!--LI√äN K·∫æT FILE JAVASCRIPT-->
                <script src="app.js"></script>
                  <script src="index.js"></script>
            
                <script>
                  

                    
                    darkLight();

                    function renderFeaturedMovies() {
                        const container = document.getElementById("scroll-container");
                        container.innerHTML = ""; // Xo√° n·ªôi dung c≈© n·∫øu c√≥

                        for (let i = 0; i < 3; i++) {
                            const movie = movieList[i];
                            const item = document.createElement("div");
                            item.className = "movie-list-main-item";

                            item.innerHTML = 
                            `<video class="movie-video" autoplay muted poster="${movie.poster}">
                                <source src="${movie.trailer}" type="video/mp4">
                            </video>
                            
                            <div class="overlay">
                                <button class="mute-btn" onclick="battat(${i})">
                                    <i class="fa-solid fa-volume-xmark"></i> <!-- Icon m·∫∑c ƒë·ªãnh l√† loa c√¢m -->
                                </button>

                                <h2 class="featured-title">${movie.title}</h2>
                                <button class="featured-button" onclick="location.href='Trangchitiet.html?id=${movie.id}'">
                                    <i class="fa-solid fa-play"></i> Xem ngay
                                </button>
                            </div>
                        `;

                            container.appendChild(item);
                        }
                       
                        // Th√™m s·ª± ki·ªán cho c√°c n√∫t loa sau khi t·∫°o ph·∫ßn t·ª≠
                        const muteBtns = document.querySelectorAll(".mute-btn");
                        const videos = document.querySelectorAll(".movie-video");

                        muteBtns.forEach((btn, index) => {
                            const video = videos[index];//truy·ªÅn v√†o s·ªë th·ª© t·ª± n√∫t loa v√† d√πng s·ªë th·ª© t·ª± n√∫t loa l√†m stt cho ph·∫ßn t·ª≠ video
                            btn.addEventListener("click", function() {
                                // N·∫øu video ƒëang ·ªü ch·∫ø ƒë·ªô t·∫Øt √¢m (muted), th√¨ m·ªü √¢m l√™n
                                if (video.muted) {
                                    video.muted = false;
                                    btn.innerHTML = '<i class="fa-solid fa-volume-high"></i>'; // C·∫≠p nh·∫≠t icon loa
                                } else {
                                    video.muted = true;
                                    btn.innerHTML = '<i class="fa-solid fa-volume-xmark"></i>'; // C·∫≠p nh·∫≠t icon t·∫Øt loa
                                }
                            });
                        });
                    }
                    function renderList(list) {
                        const list2 = document.getElementById("list2");
                        const list1 = document.getElementById("list1");
                        list2.innerHTML = ""; // X√≥a s·∫°ch n·ªôi dung c≈©

                        function eventMouse(div, video) { //h√†m s·ª± ki√™n
                                div.addEventListener('mouseenter', () => {
                                if (video) {
                                    video.style.display = 'block';
                                    video.load(); // ƒë·∫£m b·∫£o t·∫£i
                                    video.oncanplay = () => {
                                        video.play();
                                    };
                                }
                            });

                                div.addEventListener('mouseleave', () => {
                                if (video) {
                                    video.pause();
                                    video.currentTime = 0;
                                    video.style.display = 'none';
                                }
                                });
                            
                            }

                        for (let i = movieList.length - 1; i >= 0; i--) {
                            if ( i >= 15 ) {// th√™m c≈©ng ƒë∆∞·ª£c parseInt((movieList.length - 1)/2
                                const movie = movieList[i];
                                const div = document.createElement("div");
                                div.classList.add("movie-list-item");

                                div.innerHTML = `
                                <img class="movie-list-item-img" src="${movie.poster}" alt="${movie.title}">
                               <video class="movie-list-item-trailer" src="${movie.trailer}" muted preload="auto" loop></video>
                                <span class="movie-list-item-title">${movie.title}</span>
                                <button class="movie-list-item-button" onclick="location.href='Trangchitiet.html?id=${movie.id}'">
                                    <i class="fa-solid fa-play"></i> Xem ngay
                                </button>
                                `;

                                const video = div.querySelector(".movie-list-item-trailer");
                                video.muted = true;
                                eventMouse(div, video);

                            list2.appendChild(div);

                            }
                            else {
                                const movie = movieList[i];
                                const div = document.createElement("div");
                                div.classList.add("movie-list-item");

                                div.innerHTML = `
                                    <img class="movie-list-item-img" src="${movie.poster}" alt="${movie.title}">
                                    <video class="movie-list-item-trailer" src="${movie.trailer}" muted preload="auto" loop style="display:none;"></video>
                                    <span class="movie-list-item-title">${movie.title}</span>
                                    <button class="movie-list-item-button" onclick="location.href='Trangchitiet.html?id=${movie.id}'">
                                        <i class="fa-solid fa-play"></i> Xem ngay
                                    </button>
                                `;

                                const video = div.querySelector(".movie-list-item-trailer");
                                    eventMouse(div, video);//G·ªçi h√†m

                                list1.appendChild(div);//th√™m v√†o danh s√°ch m·ªôt
                            }

                        }
                    }

                    // G·ªçi h√†m khi trang ƒë√£ t·∫£i xong
                    window.onload = function () {
                        renderFeaturedMovies();
                        renderList(movieList);
                    };

                    let currentIndex = 0;

                    function scrollToRight(b) {
                        const container = document.getElementById("scroll-container");
                        const items = document.querySelectorAll(".movie-list-main-item");
                        const videos = document.querySelectorAll(".movie-video"); // c·∫ßn ph·∫£i c√≥ d√≤ng n√†y ·ªü 
                        //ƒë√¢y! v√¨ videos ƒë√£ khai b√°o b√™n trong h√†m renderFeaturedMovies() n√™n kh√¥ng th·ªÉ c·ª© l·∫•y 
                        //video m√† kh√¥ng khai b√°o l·∫°i trong h√†m crollToRight() n√†y. ho·∫∑c khai b√°o b√™n ngo√†i th√¨
                        //ph·∫£i d√πng let ƒë·ªÉ c√≥ th·ªÉ c·∫≠p nh·∫≠t gi√° tr·ªã.
                        const maxIndex = items.length - 1;
                        
                        videos[currentIndex].pause(); //t·∫Øt autoplay
                        videos[currentIndex].currentTime = 0;//cho th·ªùi gian trailer ch·∫°y v·ªÅ m·ªëc 0

                        if (currentIndex < maxIndex&&b ==='right') {
                            currentIndex++;
                        }
                        else if (currentIndex > 0 && b ==='left') {
                            currentIndex--;
                        }
                        else if (currentIndex === maxIndex&&b ==='right') {
                            currentIndex=0;
                            const offset = currentIndex;
                        }
                         else if (currentIndex === 0 && b ==='left') {
                            currentIndex+=maxIndex;
                        }

                        const offset = items[currentIndex].offsetLeft;
                            container.style.transform = `translateX(-${offset}px)`;
                            container.style.transition = "transform 0.5s ease";
                            videos[currentIndex].play();
                    }
                </script>